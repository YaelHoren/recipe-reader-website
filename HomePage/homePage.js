const recipes = [
  {
    title: "×‘×¨××•× ×™×– ×¤×¨×•×•×” ×¢× ×—×××ª ×‘×•×˜× ×™×",
    image: "../images/×‘×¨××•× ×™×–.jpg",
    ingredients: [
      "150 ×’' ×©×•×§×•×œ×“ ××¨×™×¨ (×—×‘×™×œ×” ×•×—×¦×™)", 
      "150 ×\"×œ ×©××Ÿ (×§×¦×ª ×™×•×ª×¨ ××—×¦×™ ×›×•×¡)",
      "200 ×’' ×¡×•×›×¨ (×›×•×¡)", 
      "4 ×‘×™×¦×™× L", 
      "60 ×\"×œ ×©×× ×ª ××ª×•×§×” / ×‘×™×©×•×œ / ×¨×™×¥ / ×¦××—×™×ª (×¨×‘×¢ ×›×•×¡)",
      "2 ×›×¤×•×ª ×©×˜×•×—×•×ª ××‘×§×ª ×§×§××•", 
      "×§×•×¨×˜ ××œ×— (×›××” ×©× ×ª×¤×¡ ×‘×™×Ÿ ×©×ª×™ ××¦×‘×¢×•×ª)", 
      "140 ×’' ×§××— ×¨×’×™×œ (×›×•×¡)",
      "2 ×›×¤×•×ª ×’×“×•×©×•×ª ×—×××ª ×‘×•×˜× ×™×"],
    steps: [
      "×©×•×‘×¨×™× ××ª ×”×©×•×§×•×œ×“ ×œ×§×•×‘×™×•×ª, ×©××™× ×‘×§×¢×¨×” ×™×—×“ ×¢× ×”×©××Ÿ ×•×××™×¡×™× ×›×“×§×” ×‘××™×§×¨×• (×œ×›×œ ××™×§×¨×• ×™×© ××ª ×”×–××Ÿ ×©×œ×•). ×‘×¨×’×¢ ×©×”×©×•×§×•×œ×“ ×¨×š â€“ ××•×¦×™××™× ×•××¢×¨×‘×‘×™× ×œ×§×¨× ××—×™×“ ×•×—×œ×§ ×œ×œ× ×’×•×©×™× ×§×˜× ×™×.",
      "×‘×¢×–×¨×ª ××˜×¨×¤×” ×˜×•×¨×¤×™× ×›×“×§×” ××ª ×”×‘×™×¦×™× ×•×”×¡×•×›×¨, ×•××•×¡×™×¤×™× ×œ×©×•×§×•×œ×“ ×ª×•×š ×›×“×™ ×¢×¨×‘×•×‘ ××”×™×¨ ×•× ××¨×¥. ××•×¡×™×¤×™× ××ª ×”×©×× ×ª, ×”×§×§××•, ×”××œ×— ×•××¡×™×™××™× ×¢× ×”×§××—. ××¢×¨×‘×‘×™× ×œ×¢×™×¡×” ××—×™×“×” ×•×—×œ×§×”.",
      "××—×××™× ×ª× ×•×¨ ×œÖ¾180 ××¢×œ×•×ª. ××©×× ×™× ×ª×‘× ×™×ª ××• ×× ×™×—×™× × ×™×™×¨ ××¤×™×™×”, ××¢×‘×™×¨×™× ××ª ×¢×™×¡×ª ×”×‘×¨××•× ×™×– ×œ×ª×‘× ×™×ª ×•××©×˜×—×™× ×‘××•×¤×Ÿ ×©×•×•×”.",
      "×©××™× ×‘×§×¢×¨×” 2 ×›×¤×•×ª ×’×“×•×©×•×ª ×—×××ª ×‘×•×˜× ×™×, ××›× ×™×¡×™× ×œ××™×§×¨×• ×‘×¢×•×¦××” ××œ××” ×›Ö¾15 ×©× ×™×•×ª, ×•××¢×¨×‘×‘×™× ×œ×‘×œ×™×œ×” ×—×œ×§×” ×•× ×•×–×œ×™×ª. ×× ×—×××ª ×”×‘×•×˜× ×™× × ×•×–×œ×™×ª ××”×§×•×¤×¡×” â€“ ××™×Ÿ ×¦×•×¨×š ×œ×—××.",
      "×‘×¢×–×¨×ª ×›×£ ××˜×¤×˜×¤×™× ×—×××ª ×‘×•×˜× ×™× ××¢×œ ×”×‘×¨××•× ×™×– ×œ×¤×™ ×”×¡×’× ×•×Ÿ ×”×¨×¦×•×™. ×‘×¢×–×¨×ª ×¡×›×™×Ÿ ××¢×¨×‘×‘×™× ××¢×˜ ×œ×™×¦×™×¨×ª ×¦×•×¨×•×ª ×™×¤×•×ª. ××•×¤×™× ×›Ö¾30 ×“×§×•×ª ××• ×¢×“ ×©×§×™×¡× ×™×•×¦× ×¢× ×¤×™×¨×•×¨×™× ×œ×—×™×.",
      "××•××œ×¥ ×œ×§×¨×¨ ××¡×¤×¨ ×©×¢×•×ª ×œ×¤× ×™ ×©×—×•×ª×›×™× ×œ×§×•×‘×™×•×ª. ×‘×™×•× ×—× ××™×Ÿ ×›××• ×œ××›×•×œ ×‘×¨××•× ×™×– ×§×¨."
    ]
  },
  {
    title: "×××¤×™× ×¡ ×ª×¤×•×—×™× ×•×©×™×‘×•×œ×ª ×©×•×¢×œ ××•×¤×—×ª ×¡×•×›×¨",
    image: "../images/×××¤×™× ×¡.jpg",
    ingredients: [
      "2 ×‘×™×¦×™× L",
      "80 ×\"×œ ×©××Ÿ (×©×œ×™×© ×›×•×¡)",
      "×©×œ×™×© ×›×•×¡ ×¡×•×›×¨ ×—×•× ×“××¨×¨×”",
      "1/3 ×›×•×¡ ×¡×™×¨×•×¤ ××™×™×¤×œ",
      "3 ×ª×¤×•×—×™× ××§×•×œ×¤×™× ×—×ª×•×›×™× ×œ×§×•×‘×™×•×ª",
      "×›×•×¡ ×©×™×‘×•×œ×ª ×©×•×¢×œ ×“×§×” (×§×•×•××§×¨)",
      "140 ×’' ×§××— ×¨×’×™×œ (×›×•×¡)",
      "×›×¤×™×ª ×§×™× ××•×Ÿ",
      "×›×¤×™×ª ××‘×§×ª ××¤×™×™×”"
    ],
    steps: [
      "×œ×—×× ×ª× ×•×¨ ×œÖ¾180 ××¢×œ×•×ª ×•×œ×©××Ÿ ×ª×‘× ×™×ª ×©×§×¢×™× ×¢× ×¡×¤×¨×™×™ ×©××Ÿ.",
      "×‘×¢×–×¨×ª ××˜×¨×¤×” ×œ×˜×¨×•×£ ×‘×™×¦×™×, ×¡×•×›×¨ ×•×¡×™×¨×•×¤ ××™×™×¤×œ ×‘××©×š ×›××” ×©× ×™×•×ª. ×œ×”×•×¡×™×£ ××ª ×”×©××Ÿ ×•×§×•×‘×™×•×ª ×”×ª×¤×•×—×™×, ×œ×¢×¨×‘×‘ ×•×œ×”×•×¡×™×£ ××ª ×”×§××—, ×©×™×‘×•×œ×ª ×©×•×¢×œ, ××‘×§×ª ××¤×™×™×” ×•×œ×¢×¨×‘×‘ ×œ×ª×¢×¨×•×‘×ª ××—×™×“×”.",
      "×œ××œ× ××ª ×”×©×§×¢×™× ×•×œ××¤×•×ª ×›Ö¾25 ×“×§×•×ª. ××•××œ×¥ ×œ× ×¢×•×¥ ×§×™×¡× ×‘××¨×›×– ×”×××¤×™× ×¡ ×•×œ×•×•×“× ×©×”×•× ×™×•×¦× × ×§×™.",
      "×ª× ×• ×œ×××¤×™× ×¡ ×œ×”×ª×§×¨×¨ ×•×ª×™×”× ×• ××”×¨×™×— ×•×”×˜×¢× ×”××©×’×¢ ğŸ˜Š"
    ]
  },
  {
    title: "×¢×•×’×ª ×’×‘×™× ×” ×× ×•×§×“×ª",
    image: "../images/×¢×•×’×ª ×’×‘×™× ×” ×× ×•×§×“×ª.jpg",
    ingredients: [
      "750 ×’' ×’×‘×™× ×” ×œ×‘× ×” 5%",
      "200 ×’' ×©×× ×ª ×—××•×¦×”",
      "150 ×’' ×™×•×’×•×¨×˜ ×‘××ª×™×§×•×ª ××¢×•×“× ×ª",
      "250 ×’' ×¡×•×›×¨ (×›×•×¡ ×•×¨×‘×¢)",
      "140 ×’' ×§××— (×›×•×¡)",
      "40 ×’' ××™× ×¡×˜× ×˜ ×¤×•×“×™× ×’ ×•× ×™×œ (2 ×›×¤×•×ª)",
      "3 ×‘×™×¦×™× ×’×“×•×œ×•×ª",
      "2 ×›×¤×•×ª ×©×˜×•×—×•×ª ××‘×§×ª ×§×§××•"
    ],
    steps: [
      "×œ×—×× ×ª× ×•×¨ ×œÖ¾180 ××¢×œ×•×ª",
      "×œ×¢×¨×‘×‘ ××ª ×”×’×‘×™× ×”, ×”×™×•×’×•×¨×˜, ×”×©×× ×ª ×•×”×¡×•×›×¨",
      "×œ×”×•×¡×™×£ ××ª ×”×‘×™×¦×™×, ×”×§××— ×•××™× ×¡×˜× ×˜ ×•× ×™×œ ×•×œ×¢×¨×‘×‘ ×œ×‘×œ×™×œ×” ××—×™×“×”",
      "×œ×”×•×¦×™× ×›Ö¾4â€“6 ×›×¤×•×ª ×‘×œ×™×œ×”, ×œ×¢×¨×‘×‘ ×¢× ×”×§×§××• ×•×œ×©××•×¨ ×‘×¦×“",
      "×œ×©×˜×— ××ª ×”×‘×œ×™×œ×” ×”×‘×”×™×¨×” ×‘×ª×‘× ×™×ª, ×œ×–×œ×£ ××ª ×”×›×”×” ×›× ×§×•×“×•×ª ××¢×œ",
      "×œ××¤×•×ª ×›Ö¾40 ×“×§×•×ª ×¢×“ ×©×”×¢×•×’×” ××ª×™×™×¦×‘×ª",
      "×œ×§×¨×¨ ×›××” ×©×¢×•×ª ×œ×¤× ×™ ×©×—×•×ª×›×™× â€“ ×¢×“×™×£ ×œ×”×›×™×Ÿ ×™×•× ××¨××©"
    ]
  },
  {
    title: "×¢×•×’×ª ××™×™×¤×œ ×¨×›×” ×•×¢×¡×™×¡×™×ª ×™×¨×§×•×ª",
    image: "../images/×¢×•×’×ª ××™×™×¤×œ.jpg",
    ingredients: [
      "3 ×‘×™×¦×™× ×’×“×•×œ×•×ª / 4 ×‘×™×¦×™× L",
      "200 ×’' ×¡×•×›×¨ (×›×•×¡)",
      "180 ×\"×œ ×©××Ÿ (3/4 ×›×•×¡)",
      "240 ×\"×œ ×ª×” (×›×•×¡)",
      "×›×¤×™×ª ×§×™× ××•×Ÿ",
      "×›×¤×™×ª ×©×˜×•×—×” ××‘×§×ª ×¡×•×“×” ×œ×©×ª×™×™×”",
      "280 ×’' ×§××— (2 ×›×•×¡×•×ª)",
      "2 ×›×¤×™×•×ª ××‘×§×ª ××¤×™×™×”",
      "×¡×™×¨×•×¤ ××™×™×¤×œ (×œ×§×™×©×•×˜ / ×œ×¦×™×¤×•×™)"
    ],
    steps: [
      "×œ×”×›×™×Ÿ ×›×•×¡ ×ª×” ×›××• ×©××•×”×‘×™×, ×œ×”×©××™×¨ ××ª ×”×ª×™×•×Ÿ 5 ×“×§×•×ª, ×œ×”×•×¦×™× ×•×œ×§×¨×¨ ××ª ×”×ª×” 15 ×“×§×•×ª",
      "×œ×—×× ×ª× ×•×¨ ×œÖ¾180 ××¢×œ×•×ª",
      "×‘××™×§×¡×¨ (××• ×™×“× ×™×ª) ×œ×¢×¨×‘×‘ ×‘×™×¦×™×, ×¡×•×›×¨, ×ª×”, ×©××Ÿ ×•××– ××ª ×©××¨ ×”××¦×¨×›×™× ×¢×“ ×œ×§×‘×œ×ª ×‘×œ×™×œ×” × ×•×–×œ×™×ª ×•××—×™×“×”",
      "×œ×”×¢×‘×™×¨ ×œ×ª×‘× ×™×ª ××©×•×× ×ª ×•×œ××¤×•×ª ×›Ö¾45â€“50 ×“×§×•×ª ××• ×¢×“ ×©×§×™×¡× ×™×•×¦× ×™×‘×©",
      "×›×©×”×¢×•×’×” ×™×•×¦××ª ××”×ª× ×•×¨, ×œ×”×–×œ×™×£ ×¢×œ×™×” ×›×—×¦×™ ×›×•×¡ ×¡×™×¨×•×¤ ××™×™×¤×œ ×‘× ×“×™×‘×•×ª"
    ]

  }
];
let isSpeaking = false;
let stopRequested = false;

function openModal(index) {
  const recipe = recipes[index];

  // ××™×¤×•×¡ ××¦×‘ ×”×§×¨××”
  speechSynthesis.cancel();
  isSpeaking = false;
  stopRequested = false;

  document.getElementById("modal-title").innerText = recipe.title;
  document.getElementById("modal-image").src = recipe.image;

  const ingredientsList = document.getElementById("modal-ingredients");
  ingredientsList.innerHTML = "";
  recipe.ingredients.forEach(item => {
    const li = document.createElement("li");
    li.textContent = item;
    ingredientsList.appendChild(li);
  });

  const stepsList = document.getElementById("modal-steps");
  stepsList.innerHTML = "";
  recipe.steps.forEach(step => {
    const li = document.createElement("li");
    li.textContent = step;
    stepsList.appendChild(li);
  });

  // ×›×¤×ª×•×¨×™ ×”×§×¨××”
  const buttonsDiv = document.getElementById("read-buttons");
  buttonsDiv.innerHTML = `
    <button id="play-btn">â–¶ï¸</button>
    <button id="pause-btn" style="display: none;">â¸ï¸</button>
    <button id="restart-btn">ğŸ”„</button>
  `;

  const playBtn = document.getElementById("play-btn");
  const pauseBtn = document.getElementById("pause-btn");
  const restartBtn = document.getElementById("restart-btn");

 playBtn.onclick = () => {
  const combinedSteps = [
    `×©× ×”××ª×›×•×Ÿ: ${recipe.title}`,
    "×”××¦×¨×›×™× ×”×:",
    ...recipe.ingredients,
    "×”×•×¨××•×ª ×”×”×›× ×”:",
    ...recipe.steps
  ];

  if (!isSpeaking) {
    speakSteps(combinedSteps);
    playBtn.style.display = "none";
    pauseBtn.style.display = "inline-block";
  } else {
    speechSynthesis.resume();
    playBtn.style.display = "none";
    pauseBtn.style.display = "inline-block";
  }
};


  pauseBtn.onclick = () => {
    speechSynthesis.pause();
    playBtn.style.display = "inline-block";
    pauseBtn.style.display = "none";
  };

  restartBtn.onclick = () => {
    speakSteps(recipe.steps, true);
    playBtn.style.display = "none";
    pauseBtn.style.display = "inline-block";
  };

  document.getElementById("recipe-modal").style.display = "block";
}

function closeModal() {
  stopSpeaking();
  speechSynthesis.cancel();
  isSpeaking = false;
  stopRequested = false;
  document.getElementById("recipe-modal").style.display = "none";
}

function speakSteps(steps, restart = false) {
  if (restart) {
    speechSynthesis.cancel();
  }
  isSpeaking = true;
  stopRequested = false;

  let index = 0;

  function speakNext() {
    if (stopRequested || index >= steps.length) {
      isSpeaking = false;
      return;
    }

    const utterance = new SpeechSynthesisUtterance(steps[index]);
    utterance.lang = "he-IL";
    utterance.onend = () => {
      index++;
      if (!stopRequested) speakNext();
    };
    speechSynthesis.speak(utterance);
  }

  speakNext();
}

function stopSpeaking() {
  stopRequested = true;
  speechSynthesis.cancel();
}